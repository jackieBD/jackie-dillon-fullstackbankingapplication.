(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{275:function(n,o,e){var t=e(151),i=t(),c=e(470),u=e(471);e(151);i.use(t.static("public")),i.use(c()),i.get("/account/create/:name/:email/:password",(function(n,o){u.find(n.params.email).then((function(e){e.length>0?(console.log("User already in exists"),o.send("User already in exists")):u.create(n.params.name,n.params.email,n.params.password).then((function(n){console.log(n),o.send(n)}))}))})),i.get("/account/login/:email/:password",(function(n,o){u.find(n.params.email).then((function(e){e.length>0?e[0].password===n.params.password?o.send(e[0]):o.send("Login failed: wrong password"):o.send("Login failed: user not found")}))})),i.get("/account/find/:email",(function(n,o){u.find(n.params.email).then((function(n){console.log(n),o.send(n)}))})),i.get("/account/findOne/:email",(function(n,o){u.findOne(n.params.email).then((function(n){console.log(n),o.send(n)}))})),i.get("/account/update/:email/:amount",(function(n,o){var e=Number(n.params.amount);u.update(n.params.email,e).then((function(n){console.log(n),o.send(n)}))})),i.get("/account/all",(function(n,o){u.all().then((function(n){console.log(n),o.send(n)}))})),i.listen(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PORT)},285:function(n,o){},287:function(n,o){},323:function(n,o){},324:function(n,o){},341:function(n,o){},355:function(n,o){},358:function(n,o){function e(n){var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=358},369:function(n,o){},371:function(n,o){},399:function(n,o){},401:function(n,o){},402:function(n,o){},407:function(n,o){},409:function(n,o){},415:function(n,o){},417:function(n,o){},436:function(n,o){},448:function(n,o){},451:function(n,o){},471:function(n,o,e){var t=e(229).MongoClient,i=null;t.connect("mongodb+srv://jackie:4rYEQrnR6TZKqGcn@cluster0.7yxjloo.mongodb.net/?retryWrites=true&w=majority",{useUnifiedTopology:!0},(function(n,o){console.log("Connected successfully to db server"),i=o.db("myproject")})),n.exports={create:function(n,o,e){return new Promise((function(t,c){var u=i.collection("users"),r={name:n,email:o,password:e,balance:0};u.insertOne(r,{w:1},(function(n,o){n?c(n):t(r)}))}))},all:function(){return new Promise((function(n,o){i.collection("users").find({}).toArray((function(e,t){e?o(e):n(t)}))}))},findOne:function(n){return new Promise((function(o,e){i.collection("users").findOne({email:n}).then((function(n){return o(n)})).catch((function(n){return e(n)}))}))},find:function(n){return new Promise((function(o,e){i.collection("users").find({email:n}).toArray((function(n,t){n?e(n):o(t)}))}))},update:function(n,o){return new Promise((function(e,t){i.collection("users").findOneAndUpdate({email:n},{$inc:{balance:o}},{returnOriginal:!1},(function(n,o){n?t(n):e(o)}))}))}}},480:function(n,o){function e(n){var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=480}},[[275,1,2]]]);
//# sourceMappingURL=main.c51aa4f7.chunk.js.map